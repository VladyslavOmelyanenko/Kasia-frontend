---
import Layout from "../layouts/Layout.astro";
import CategoryGrid from "../components/CategoryGrid.astro";
import { client } from "../lib/sanity";

const filmProjects = await client.fetch(`
  *[_type == "project" && category == "film"]
    | order(orderRank == null, orderRank asc, year desc, title asc){
      title,
      "slug": slug.current,
      director,
      placeAndYear,
      category,
      caption,

      "coverImage": coverImage{
        ...,
        asset,
        "assetDoc": asset->{
          metadata{
            dimensions{ width, height },
            lqip
          }
        }
      }
    }
`);
---

<Layout>
  <CategoryGrid projects={filmProjects} />
</Layout>
